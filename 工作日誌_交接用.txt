# 學生積分銀行整合專案 - 工作日誌 (2026/02/16)

## 專案目標
實現 Vercel 與 Google Apps Script (GAS) 的前後端分離架構，整合積分系統、競標功能與座位選位系統於單一入口。

## 已完成工作 (截至 04:20 PM)
1. **目錄結構優化**：
   - 將檔案分類為 `scrapers/`, `gas/`, `data/`, `utils/`。
   
2. **爬蟲效能優化 (智慧銜接模式)**：
   - 往回找日期時，只要撞到 Excel 中已有的分頁，立即停止抓取，實現秒速同步。

3. **點數計算核心 (`utils/point_calculator.py`)**：
   - 支援解析多種座號格式，支援日期區間過濾。

4. **雲端 API 部署 (`gas/`)**：
   - 已透過 `clasp` 整合並部署優化後的 GAS 程式碼。
   - 支援 Python 本地發分與 Vercel 遠端呼叫。

5. **使用者介面與環境**：
   - **Vercel 雲端入口**: https://yphs-114-106.vercel.app/ (學生端唯一入口)。
   - **手機端優化**: 已加入 viewport meta 標籤，確保行動裝置瀏覽舒適度。
   - **系統搬家通知**: GAS 端已加入 `target="_top"` 重定向連結。

6. **自動化開發流程 (Clasp + GitHub Integration)**：
   - **GAS 自動同步**: 已設定 Clasp 工具。Cline 可直接執行 `clasp push` 修改雲端 Code。
   - **Vercel 自動同步**: 前端 `index.html` 修改後，執行 `git push` 即自動發布。
   - **跨網域解決方案**: 全面採用 **JSONP** 模式。

## 關鍵檔案定義 (Source of Truth)
- **`real-index.txt`**: 積分銀行的「真值來源」HTML。包含所有最重要的**規則說明、凍結公式與文字內容**。Cline 修改 `index.html` 前必須參考此檔，確保文字細節不丟失。
- **`real-code.txt`**: 積分銀行的「真值來源」GAS 邏輯。包含登入、出價與紀錄讀取的後端核心代碼。

## 待接續工作 / 測試
- [ ] **座位系統介面整合**: 目前後端 API 已通，需在 Vercel 介面加入座位選位分頁。
- [ ] **新學期正式啟動**: 2/23 開學後開始運作。

## 開發者提示
- **Vercel 入口**：https://yphs-114-106.vercel.app/
- **GAS 推播 (Clasp)**：修改代碼後執行 `clasp push`，完成後需手動進入 GAS 執行「管理部署 > 新增版本」。
- **跨網域通訊**：必須確保 GAS 端能處理 `action` 與 `callback` 參數以支援 JSONP。

---
* Cline AI 代理人 敬上